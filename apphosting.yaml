# Firebase App Hosting Configuration for Monorepo
runtime: nodejs20

# Build configuration
build:
  commands:
    - npm install
    - npm run build

# Run configuration
run:
  command: npm start

# Runtime configuration
runConfig:
  cpu: 1
  memory: 512Mi
  minInstances: 0
  maxInstances: 10
  concurrency: 80

# Environment variables (non-sensitive)
env:
  - variable: NODE_ENV
    availability: [BUILD, RUNTIME]
    value: production
  - variable: PORT
    availability: [RUNTIME]
    value: "8080"
  - variable: VITE_API_URL
    availability: [BUILD]
    value: /api
  - variable: EMAIL_SERVICE
    availability: [RUNTIME]
    value: zoho
  - variable: EMAIL_HOST
    availability: [RUNTIME]
    value: smtppro.zoho.in
  - variable: EMAIL_PORT
    availability: [RUNTIME]
    value: "465"
  - variable: EMAIL_SECURE
    availability: [RUNTIME]
    value: "true"
  - variable: CORS_ORIGIN
    availability: [RUNTIME]
    value: https://www.magizhindustries.in
  - variable: ADMIN_EMAIL
    availability: [RUNTIME]
    value: arul@magizhindustries.in
  - variable: OTP_VALID_TIME
    availability: [RUNTIME]
    value: "120"
  - variable: OTP_RESEND_TIME
    availability: [RUNTIME]
    value: "120"

  # Environment variables (sensitive)
  - variable: JWT_SECRET
    secret: projects/773055492466/secrets/JWT_SECRET
  - variable: EMAIL_USER
    secret: projects/773055492466/secrets/EMAIL_USER
  - variable: EMAIL_PASSWORD
    secret: projects/773055492466/secrets/EMAIL_PASSWORD
  - variable: FIREBASE_API_KEY
    secret: projects/773055492466/secrets/FIREBASE_API_KEY